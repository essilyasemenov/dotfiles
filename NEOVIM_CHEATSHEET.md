# Neovim — Шпаргалка

> **Обозначения:**
> - `<Leader>` — пробел (Space) по умолчанию в большинстве конфигов
> - `C-x` — Ctrl+x
> - `A-x` — Alt/Option+x
> - `[count]` — необязательное число (например `5j` — вниз на 5 строк)
> - `{motion}` — любое движение (w, b, e, $, 0, gg, G...)

---

## РЕЖИМЫ

| Клавиша      | Переход в режим                        |
|--------------|----------------------------------------|
| `Esc` / `C-[` | Нормальный режим (из любого)          |
| `i`          | Вставка — перед курсором               |
| `a`          | Вставка — после курсора                |
| `I`          | Вставка — в начало строки              |
| `A`          | Вставка — в конец строки               |
| `o`          | Новая строка ниже + вставка            |
| `O`          | Новая строка выше + вставка            |
| `s`          | Удалить символ + вставка               |
| `S`          | Удалить строку + вставка               |
| `v`          | Визуальный режим (символы)             |
| `V`          | Визуальный режим (строки)              |
| `C-v`        | Визуальный блочный режим               |
| `R`          | Режим замены (Replace)                 |
| `:`          | Командный режим                        |

---

## ДВИЖЕНИЕ КУРСОРА

### Базовое

| Клавиша  | Действие                           |
|----------|------------------------------------|
| `h j k l` | ← ↓ ↑ →                          |
| `w`      | Следующее слово (начало)           |
| `W`      | Следующее СЛОВО (через пробел)     |
| `b`      | Предыдущее слово (начало)          |
| `B`      | Предыдущее СЛОВО                   |
| `e`      | Конец текущего слова               |
| `E`      | Конец текущего СЛОВА               |
| `ge`     | Конец предыдущего слова            |
| `0`      | Начало строки                      |
| `^`      | Первый непробельный символ строки  |
| `$`      | Конец строки                       |
| `g_`     | Последний непробельный символ      |

### По экрану

| Клавиша  | Действие                           |
|----------|------------------------------------|
| `H`      | Верх экрана                        |
| `M`      | Середина экрана                    |
| `L`      | Низ экрана                         |
| `zz`     | Центрировать строку на экране      |
| `zt`     | Строка — вверх экрана              |
| `zb`     | Строка — вниз экрана               |
| `C-u`    | Прокрутка вверх на полэкрана       |
| `C-d`    | Прокрутка вниз на полэкрана        |
| `C-b`    | Прокрутка вверх на экран           |
| `C-f`    | Прокрутка вниз на экран            |
| `C-e`    | Прокрутка вниз на 1 строку         |
| `C-y`    | Прокрутка вверх на 1 строку        |

### По файлу

| Клавиша  | Действие                           |
|----------|------------------------------------|
| `gg`     | Начало файла                       |
| `G`      | Конец файла                        |
| `[N]G`   | Перейти на строку N                |
| `:[N]`   | Перейти на строку N (команда)      |
| `%`      | Перейти к парной скобке `() [] {}` |

### Прыжки по символам (в строке)

| Клавиша  | Действие                                   |
|----------|--------------------------------------------|
| `f{x}`   | Прыжок вперёд на символ x                 |
| `F{x}`   | Прыжок назад на символ x                  |
| `t{x}`   | Прыжок вперёд до символа x (не включая)   |
| `T{x}`   | Прыжок назад до символа x                 |
| `;`      | Повторить f/F/t/T вперёд                  |
| `,`      | Повторить f/F/t/T назад                   |

---

## РЕДАКТИРОВАНИЕ

### Удаление

| Клавиша     | Действие                           |
|-------------|------------------------------------|
| `x`         | Удалить символ под курсором        |
| `X`         | Удалить символ перед курсором      |
| `d{motion}` | Удалить по движению                |
| `dd`        | Удалить строку                     |
| `D`         | Удалить до конца строки            |
| `dw`        | Удалить слово                      |
| `diw`       | Удалить слово (без пробелов вокруг) |
| `dip`       | Удалить абзац                      |
| `di"`       | Удалить содержимое "..."           |
| `da"`       | Удалить "..." вместе с кавычками   |
| `di(`       | Удалить содержимое (...)           |

### Изменение (удалить + режим вставки)

| Клавиша     | Действие                           |
|-------------|------------------------------------|
| `c{motion}` | Изменить по движению               |
| `cc`        | Изменить всю строку                |
| `C`         | Изменить до конца строки           |
| `cw`        | Изменить слово                     |
| `ciw`       | Изменить слово                     |
| `ci"`       | Изменить содержимое "..."          |
| `ci(`       | Изменить содержимое (...)          |
| `r{x}`      | Заменить символ на x               |

### Копирование и вставка

| Клавиша     | Действие                           |
|-------------|------------------------------------|
| `y{motion}` | Скопировать по движению (yank)     |
| `yy` / `Y`  | Скопировать строку                 |
| `yiw`       | Скопировать слово                  |
| `p`         | Вставить после курсора             |
| `P`         | Вставить перед курсором            |
| `"[reg]y`   | Скопировать в регистр [reg]        |
| `"[reg]p`   | Вставить из регистра [reg]         |
| `"+y`       | Скопировать в системный буфер      |
| `"+p`       | Вставить из системного буфера      |

### Отмена / Повтор

| Клавиша  | Действие                           |
|----------|------------------------------------|
| `u`      | Отменить (undo)                    |
| `C-r`    | Повторить (redo)                   |
| `.`      | Повторить последнее изменение      |

### Форматирование

| Клавиша     | Действие                           |
|-------------|------------------------------------|
| `>>`        | Сдвиг строки вправо (indent)       |
| `<<`        | Сдвиг строки влево                 |
| `>{motion}` | Сдвиг по движению                  |
| `=`         | Автоформатирование (indent)        |
| `==`        | Автоформатирование строки          |
| `gg=G`      | Форматировать весь файл            |
| `J`         | Объединить строки (join)           |
| `gJ`        | Объединить без пробела             |
| `~`         | Переключить регистр символа        |
| `gu{motion}`| В нижний регистр                   |
| `gU{motion}`| В верхний регистр                  |
| `guw`       | Слово в нижний регистр             |
| `gUw`       | Слово в верхний регистр            |

---

## ПОИСК И ЗАМЕНА

### Поиск

| Клавиша     | Действие                                |
|-------------|-----------------------------------------|
| `/pattern`  | Поиск вперёд                            |
| `?pattern`  | Поиск назад                             |
| `n`         | Следующее совпадение                    |
| `N`         | Предыдущее совпадение                   |
| `*`         | Поиск слова под курсором вперёд         |
| `#`         | Поиск слова под курсором назад          |
| `g*`        | Поиск (частичное совпадение) вперёд     |
| `:noh`      | Убрать подсветку поиска                 |

### Замена (`:substitute`)

```
:[range]s/старое/новое/[флаги]
```

| Команда                | Действие                               |
|------------------------|----------------------------------------|
| `:s/foo/bar/`          | Первое вхождение в строке              |
| `:s/foo/bar/g`         | Все вхождения в строке                 |
| `:%s/foo/bar/g`        | Все в файле                            |
| `:%s/foo/bar/gc`       | Все в файле с подтверждением           |
| `:%s/foo/bar/gi`       | Без учёта регистра                     |
| `:'<,'>s/foo/bar/g`    | В выделении                            |
| `:5,10s/foo/bar/g`     | В строках 5–10                         |
| `:%s/\bword\b/new/g`   | Целые слова только                     |

---

## ОКНА И ВКЛАДКИ

### Окна (splits)

| Клавиша / Команда | Действие                           |
|-------------------|------------------------------------|
| `C-w s` / `:sp`  | Разделить горизонтально            |
| `C-w v` / `:vsp` | Разделить вертикально              |
| `C-w h/j/k/l`    | Переключиться на окно ←↓↑→ (алиас: `C-h/j/k/l`) |
| `C-w H/J/K/L`    | Переместить окно ←↓↑→              |
| `C-w =`          | Выровнять размеры окон             |
| `C-w _`          | Максимизировать по высоте          |
| `C-w |`          | Максимизировать по ширине          |
| `C-w q` / `:q`   | Закрыть окно                       |
| `C-w o` / `:on`  | Оставить только текущее окно       |
| `C-w r`          | Поменять окна местами              |
| `[N]C-w >`       | Увеличить ширину на N              |
| `[N]C-w <`       | Уменьшить ширину на N              |

### Вкладки (tabs)

| Команда / Клавиша | Действие                           |
|-------------------|------------------------------------|
| `:tabnew`         | Новая вкладка                      |
| `:tabn` / `gt`    | Следующая вкладка                  |
| `:tabp` / `gT`    | Предыдущая вкладка                 |
| `[N]gt`           | Перейти на вкладку N               |
| `:tabc`           | Закрыть вкладку                    |
| `:tabo`           | Закрыть все кроме текущей          |

---

## БУФЕРЫ

| Команда       | Действие                           |
|---------------|------------------------------------|
| `:ls` / `:buffers` | Список буферов                |
| `:b [N/name]` | Переключиться на буфер             |
| `:bn`         | Следующий буфер                    |
| `:bp`         | Предыдущий буфер                   |
| `:bd`         | Удалить (закрыть) буфер            |
| `:bda`        | Удалить все буферы                 |
| `C-^`         | Переключиться на предыдущий буфер  |

---

## MARKS (ЗАКЛАДКИ)

| Клавиша      | Действие                                  |
|--------------|-------------------------------------------|
| `m{a-z}`     | Установить локальную метку                |
| `m{A-Z}`     | Установить глобальную метку (между файлами)|
| `` `{mark}`` | Перейти на метку (позиция)                |
| `'{mark}`    | Перейти на строку с меткой               |
| `:marks`     | Список всех меток                         |
| `` `. ``     | Место последнего изменения                |
| `` `^ ``     | Место последней вставки                   |
| `` `[ `` / `` `] `` | Начало / конец последнего yank/change |

---

## МАКРОСЫ

| Клавиша      | Действие                           |
|--------------|------------------------------------|
| `q{a-z}`     | Начать запись макроса в регистр    |
| `q`          | Остановить запись                  |
| `@{a-z}`     | Воспроизвести макрос               |
| `@@`         | Повторить последний макрос         |
| `[N]@{a-z}`  | Воспроизвести N раз                |

---

## РЕГИСТРЫ

| Регистр  | Описание                                     |
|----------|----------------------------------------------|
| `""`     | Безымянный (последний d/y/c)                 |
| `"0`     | Последний yank (только y, не d)              |
| `"1`–`"9` | История удалений (1 = последнее)            |
| `"a`–`"z` | Именованные (строчные — заменить)           |
| `"A`–`"Z` | Именованные (заглавные — добавить к регистру)|
| `"+`     | Системный буфер обмена                       |
| `"*`     | Первичный буфер (выделение мышью)            |
| `"_`     | Чёрная дыра (не сохраняет)                   |
| `"/`     | Последний поиск                              |
| `":` | Последняя команда                                |
| `"%`     | Имя текущего файла                           |

Просмотр: `:reg` или `:reg a b c`

---

## TEXT OBJECTS (ТЕКСТОВЫЕ ОБЪЕКТЫ)

Используются с `d`, `c`, `y`, `v` и т.д.

| Объект | Описание                                |
|--------|-----------------------------------------|
| `iw`   | Слово (inner word)                      |
| `aw`   | Слово + пробел вокруг                   |
| `is`   | Предложение (inner sentence)            |
| `as`   | Предложение + пробел                    |
| `ip`   | Абзац (inner paragraph)                 |
| `ap`   | Абзац + пустые строки                   |
| `i"`   | Содержимое "..."                        |
| `a"`   | "..." вместе с кавычками               |
| `i'`   | Содержимое '...'                        |
| `i)`   | Содержимое (...)                        |
| `a)`   | (...) с скобками                        |
| `i]`   | Содержимое [...]                        |
| `i}`   | Содержимое {...}                        |
| `it`   | Содержимое HTML-тега                    |
| `at`   | HTML-тег полностью                      |

---

## ФАЙЛЫ И СЕССИИ

| Команда             | Действие                           |
|---------------------|------------------------------------|
| `:e {file}`         | Открыть файл                       |
| `:w`                | Сохранить                          |
| `:w {file}`         | Сохранить как                      |
| `:wa`               | Сохранить все буферы               |
| `:q`                | Закрыть                            |
| `:q!`               | Закрыть без сохранения             |
| `:wq` / `:x` / `ZZ` | Сохранить и закрыть               |
| `:qa!`              | Закрыть всё без сохранения         |
| `:r {file}`         | Вставить содержимое файла          |
| `:r !{cmd}`         | Вставить вывод команды             |

---

## ПОЛЕЗНЫЕ КОМАНДЫ

### Навигация по коду (LSP)

| Клавиша / Команда  | Действие                           |
|--------------------|------------------------------------|
| `gd`               | Перейти к определению (go to def)  |
| `gD`               | Перейти к объявлению               |
| `gr`               | Список ссылок (references)         |
| `gi`               | Перейти к реализации               |
| `K`                | Показать документацию (hover)      |
| `C-]`              | Перейти к тегу (ctags)             |
| `C-t`              | Вернуться назад (из тега)          |
| `C-o`              | Назад в jump list                  |
| `C-i`              | Вперёд в jump list                 |
| `:jumps`           | Список переходов                   |

### Фолдинг (свёртка кода)

| Клавиша  | Действие                           |
|----------|------------------------------------|
| `za`     | Переключить фолд                   |
| `zo`     | Открыть фолд                       |
| `zc`     | Закрыть фолд                       |
| `zR`     | Открыть все фолды                  |
| `zM`     | Закрыть все фолды                  |
| `zf`     | Создать фолд вручную               |

### Числа

| Клавиша  | Действие                           |
|----------|------------------------------------|
| `C-a`    | Увеличить число под курсором       |
| `C-x`    | Уменьшить число под курсором       |
| `[N]C-a` | Увеличить на N                     |

### Прочее

| Клавиша / Команда | Действие                           |
|-------------------|------------------------------------|
| `ga`              | Код ASCII символа под курсором     |
| `g8`              | UTF-8 код символа                  |
| `:!{cmd}`         | Выполнить shell команду            |
| `!!{cmd}`         | Заменить строку выводом команды    |
| `:%!{cmd}`        | Пропустить весь файл через команду |
| `:set nu`         | Включить номера строк              |
| `:set rnu`        | Включить относительные номера      |
| `:set wrap`       | Включить перенос строк             |
| `:set list`       | Показать невидимые символы         |

---

## ВИЗУАЛЬНЫЙ РЕЖИМ

| Клавиша  | Действие                           |
|----------|------------------------------------|
| `v`      | Посимвольное выделение             |
| `V`      | Построчное выделение               |
| `C-v`    | Блочное выделение                  |
| `o`      | Переместить курсор на другой конец |
| `O`      | Переместить курсор в другой угол   |
| `gv`     | Восстановить последнее выделение   |
| `>`      | Сдвиг вправо                       |
| `<`      | Сдвиг влево                        |
| `=`      | Автоформатирование                 |
| `~`      | Переключить регистр                |
| `I`      | Вставка в начало каждой строки блока |
| `A`      | Вставка в конец каждой строки блока  |

---

## КОМАНДНЫЙ РЕЖИМ (`:`)

| Клавиша     | Действие                           |
|-------------|------------------------------------|
| `Tab`       | Автодополнение                     |
| `C-p / C-n` | Предыдущая / следующая команда     |
| `C-r C-w`   | Вставить слово под курсором        |
| `C-r "`     | Вставить из безымянного регистра   |
| `q:`        | Открыть историю команд как буфер   |
| `q/`        | Открыть историю поиска как буфер   |
| `@:`        | Повторить последнюю команду        |

---

## ДИАГНОСТИКА И СПРАВКА

| Команда          | Действие                              |
|------------------|---------------------------------------|
| `:help {topic}`  | Открыть справку по теме               |
| `:checkhealth`   | Проверка состояния Neovim             |
| `:version`       | Версия и опции сборки                 |
| `:set {option}?` | Текущее значение опции                |
| `:verbose set {option}?` | Где установлена опция         |
| `:scriptnames`   | Все загруженные скрипты               |
| `:messages`      | История сообщений                     |
| `:map`           | Все активные маппинги                 |
| `:nmap`          | Маппинги нормального режима           |

---

## КАСТОМНЫЕ КЛАВИШИ (КОНФИГ)

### Основные (keymaps.lua)

| Клавиша            | Действие                                     |
|--------------------|----------------------------------------------|
| `C-s`              | Сохранить файл                               |
| `jk` (insert)      | Выйти из Insert mode                        |
| `Esc` (normal)     | Убрать подсветку поиска                      |
| `C-h/j/k/l`       | Навигация между окнами (алиас `C-w h/j/k/l`) |
| `Tab` / `S-Tab`   | Следующий / предыдущий буфер                 |
| `<leader>x`       | Закрыть буфер                                |
| `J` / `K` (visual) | Переместить строки вниз / вверх             |
| `<` / `>` (visual) | Отступ (остаёмся в visual mode)             |
| `p` (visual)       | Вставить без потери буфера обмена            |

### LSP (lsp.lua)

| Клавиша        | Действие                   |
|----------------|-----------------------------|
| `gd`           | Перейти к определению       |
| `gD`           | Перейти к декларации        |
| `gi`           | Перейти к реализации        |
| `gr`           | Показать референсы          |
| `K`            | Документация (hover)        |
| `<leader>rn`   | Переименовать символ       |
| `<leader>ca`   | Code action                |
| `<leader>e`    | Показать ошибку (float)    |
| `[d` / `]d`   | Предыдущая / следующая ошибка |

### Автодополнение (completion.lua)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `C-j` / `C-k`  | Следующий / предыдущий пункт      |
| `Tab` / `S-Tab` | Следующий пункт / jump в сниппете |
| `CR`           | Подтвердить выбор                  |
| `C-Space`      | Открыть дополнение вручную         |
| `C-e`          | Закрыть дополнение                 |
| `C-b` / `C-f`  | Скролл документации               |

### Telescope (telescope.lua)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `<leader>ff`   | Найти файл                        |
| `<leader>fg`   | Поиск по проекту (live grep)      |
| `<leader>fb`   | Открытые буферы                   |
| `<leader>fr`   | Недавние файлы                    |
| `<leader>fc`   | Найти слово под курсором          |
| `<leader>fh`   | Справка Neovim                    |

> **Внутри Telescope:**
> - `C-j` / `C-k` — следующий / предыдущий
> - `C-q` — отправить в quickfix list
> - `Esc` — закрыть

### Проводник (explorer.lua — Neo-tree)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `<leader>n`    | Файловое дерево (toggle)           |
| `<leader>N`    | Показать текущий файл в дереве     |

### Отладка (dap.lua)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `F5`           | Запустить / продолжить             |
| `F10`          | Шаг через (step over)              |
| `F11`          | Шаг внутрь (step into)             |
| `F12`          | Шаг наружу (step out)              |
| `<leader>db`   | Брейкпоинт (toggle)               |
| `<leader>dB`   | Условный брейкпоинт               |
| `<leader>dr`   | Перезапустить                      |
| `<leader>dq`   | Остановить                         |
| `<leader>du`   | Открыть/закрыть UI                 |
| `<leader>de`   | Вычислить выражение (n/v)          |
| `<leader>dt`   | Дебажить тест под курсором (Go)    |
| `<leader>dl`   | Повторить последний тест (Go)      |

### Тесты (neotest.lua)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `<leader>tr`   | Тест под курсором                  |
| `<leader>tR`   | Все тесты в файле                  |
| `<leader>ts`   | Панель тестов (toggle)             |
| `<leader>to`   | Вывод теста                        |
| `<leader>tO`   | Панель вывода (снизу)              |
| `<leader>tS`   | Остановить тест                    |
| `<leader>td`   | Дебажить тест                      |
| `]t` / `[t`   | Следующий / предыдущий провалившийся |

### Терминал (terminal.lua)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `C-\`          | Терминал (toggle, n/t)             |
| `Esc` (terminal) | Выйти из terminal mode          |

### Буферы (bufferline.lua)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `<leader>1–5`  | Перейти к буферу 1–5               |

### Go (gopher.lua)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `<leader>cj`   | Добавить json теги                 |
| `<leader>cy`   | Добавить yaml теги                 |
| `<leader>cJ`   | Убрать json теги                   |
| `<leader>ce`   | `if err != nil`                    |
| `<leader>ci`   | Реализовать интерфейс              |
| `<leader>cm`   | `go mod tidy`                      |

### Форматирование (formatting.lua)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `<leader>p`    | Форматировать файл (n/v)           |

### Surround (editing.lua — nvim-surround)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `ysiw"`        | Обернуть слово в `""`              |
| `ds"`          | Убрать кавычки                     |
| `cs"'`         | Заменить `"` на `'`                |

### TODO (editing.lua — todo-comments)

| Клавиша        | Действие                           |
|----------------|------------------------------------|
| `<leader>ft`   | Найти TODO в проекте               |

---

## GIT (ПЛАГИНЫ)

### Neogit — `<leader>gg`

| Клавиша       | Действие                                      |
|---------------|-----------------------------------------------|
| `<leader>gg`  | Открыть Neogit (статус-буфер, всё остальное внутри) |

> **Внутри Neogit:**
> - `s` — stage файл/hunk
> - `u` — unstage
> - `x` — discard changes
> - `c` — commit popup
> - `P` — push popup
> - `p` — pull popup
> - `b` — branch popup (switch, create, delete)
> - `m` — merge popup
> - `Z` — stash popup
> - `l` — log popup
> - `d` — diff popup
> - `Tab` — развернуть/свернуть секцию
> - `q` — закрыть Neogit

### Gitsigns — `<leader>h` (hunks)

| Клавиша       | Действие                           |
|---------------|------------------------------------|
| `]h / [h`     | Следующий / предыдущий hunk        |
| `<leader>hs`  | Stage hunk                         |
| `<leader>hr`  | Reset hunk                         |
| `<leader>hu`  | Undo stage hunk                    |
| `<leader>hS`  | Stage весь файл                    |
| `<leader>hR`  | Reset весь файл                    |
| `<leader>hp`  | Preview hunk                       |
| `<leader>hd`  | Diff файла                         |
| `<leader>hb`  | Blame строки                       |
| `<leader>hB`  | Blame (полный коммит)              |
| `<leader>ht`  | Toggle inline blame                |

---

*Создан для быстрого поиска — используй `/{pattern}` внутри файла для навигации*
